<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}ETERNO{% endblock %}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <!-- Main Navigation Bar -->
    <nav>
      <div class="logo-section">
        <div class="logo">ETERNO</div>
      </div>

      <!-- Dynamic navigation based on user role -->
      <div class="nav-wrapper">
        <ul class="nav-links">
          {% if session.role == 'admin' %}
          <!-- Admin-specific links -->
          <li><a href="{{ url_for('admin.dashboard') }}">Dashboard</a></li>
          <li><a href="{{ url_for('admin.pos') }}">POS</a></li>
          <li><a href="{{ url_for('admin.inventory') }}">Inventory</a></li>
          <li>
            <a
              href="#"
              onclick="confirmLogout(); return false;"
              id="logoutUrl"
              data-url="{{ url_for('auth.logout') }}"
              >Logout</a
            >
          </li>
          {% elif session.user_id %}
          <!-- Customer links when logged in -->
          <li><a href="{{ url_for('customer.shop') }}">Shop</a></li>
          <li><a href="{{ url_for('customer.about') }}">About</a></li>
          <li><a href="{{ url_for('customer.cart') }}">Cart</a></li>
          <li>
            <a
              href="#"
              onclick="confirmLogout(); return false;"
              id="logoutUrl"
              data-url="{{ url_for('auth.logout') }}"
              >Logout</a
            >
          </li>
          {% else %}
          <!-- Guest links -->
          <li><a href="{{ url_for('main.index') }}">Home</a></li>
          <li><a href="{{ url_for('customer.about') }}">About</a></li>
          <li><a href="{{ url_for('auth.login') }}">Login</a></li>
          <li><a href="{{ url_for('auth.register') }}">Register</a></li>
          {% endif %}
        </ul>
        <button
          class="theme-toggle"
          onclick="toggleTheme()"
          id="themeToggle"
          title="Toggle theme"
        >
          <span id="themeIcon">ðŸŒ™</span>
        </button>
      </div>
    </nav>

    <!-- Main content area -->
    <main>{% block content %}{% endblock %}</main>

    <!-- Floating cart button for customers -->
    {% if session.user_id and session.role != 'admin' %}
    <a
      href="{{ url_for('customer.cart') }}"
      class="floating-cart"
      title="View Cart"
    >
      ðŸ›’
      <span class="cart-count" id="cartCount">0</span>
    </a>
    {% endif %}

    <!-- Footer section -->
    <footer>
      <div class="footer-grid">
        <div class="footer-section">
          <h3>ETERNO</h3>
          <p>
            Timeless fashion that transcends generations. Discover the eternal
            elegance of our collection.
          </p>
        </div>

        <div class="footer-section">
          <h4>QUICK LINKS</h4>
          <ul class="footer-links">
            <li>
              <a href="{{ url_for('customer.shop') }}">Shop</a>
            </li>
            <li>
              <a href="{{ url_for('customer.about') }}">About</a>
            </li>
            {% if session.user_id %}
            <li>
              <a href="{{ url_for('customer.cart') }}">Cart</a>
            </li>
            {% else %}
            <li>
              <a href="{{ url_for('auth.login') }}">Login</a>
            </li>
            <li>
              <a href="{{ url_for('auth.register') }}">Register</a>
            </li>
            {% endif %}
          </ul>
        </div>

        <div class="footer-section">
          <h4>CONTACT</h4>
          <p>
            Email:
            <a href="mailto:etern0.mnl@gmail.com" class="footer-social-link"
              >etern0.mnl@gmail.com</a
            ><br />
            Address: 6C Kingston Street, Greenland Phase 1, Marikina City,
            Philippines
          </p>
        </div>

        <div class="footer-section">
          <h4>FOLLOW US</h4>
          <p>
            <a
              href="https://www.facebook.com/profile.php?id=61568083162096"
              target="_blank"
              class="footer-social-link"
              >Facebook</a
            >
            <a
              href="https://www.instagram.com/eterno.mnl"
              target="_blank"
              class="footer-social-link"
              >Instagram</a
            >
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>Â© 2024 ETERNO - TIMELESS FASHION. All rights reserved.</p>
      </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
      // Make logout URL available to JavaScript
      document.addEventListener("DOMContentLoaded", function () {
        const logoutLinks = document.querySelectorAll("#logoutUrl");
        logoutLinks.forEach((link) => {
          if (link.dataset.url) {
            window.logoutUrl = link.dataset.url;
          }
        });
      });
    </script>
    {% block extra_js %}{% endblock %}
  </body>
</html>
