<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}ETERNO{% endblock %}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/eterno-logo.png') }}">
    <script>
      (function () {
        const savedTheme = localStorage.getItem("theme") || "dark";
        document.documentElement.setAttribute("data-theme", savedTheme);
      })();
    </script>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <nav>
      <div class="logo-section">
        <a href="{{ url_for('main.index') }}" class="logo-link">
          <div class="logo">ETERNO</div>
        </a>
      </div>

      <div class="nav-wrapper">
        <ul class="nav-links">
          {% if session.role == 'admin' %}
          <li><a href="{{ url_for('main.index') }}">Home</a></li>
          <li><a href="{{ url_for('admin.dashboard') }}">Dashboard</a></li>
          <li><a href="{{ url_for('admin.pos') }}">POS</a></li>
          <li><a href="{{ url_for('admin.inventory') }}">Inventory</a></li>
          <li>
            <a
              href="#"
              onclick="confirmLogout(); return false;"
              id="logoutUrl"
              data-url="{{ url_for('auth.logout') }}"
              >Logout</a
            >
          </li>
          {% elif session.user_id %}
          <li><a href="{{ url_for('main.index') }}">Home</a></li>
          <li><a href="{{ url_for('customer.shop') }}">Shop</a></li>
          <li><a href="{{ url_for('customer.about') }}">About</a></li>
          <li><a href="{{ url_for('customer.cart') }}">Cart</a></li>
          <li>
            <a
              href="#"
              onclick="confirmLogout(); return false;"
              id="logoutUrl"
              data-url="{{ url_for('auth.logout') }}"
              >Logout</a
            >
          </li>
          {% else %}
          <li><a href="{{ url_for('main.index') }}">Home</a></li>
          <li><a href="{{ url_for('customer.about') }}">About</a></li>
          <li><a href="{{ url_for('auth.login') }}">Login</a></li>
          <li><a href="{{ url_for('auth.register') }}">Register</a></li>
          {% endif %}
        </ul>
        <button
          class="theme-toggle"
          onclick="toggleTheme()"
          id="themeToggle"
          title="Toggle theme"
          aria-label="Toggle theme"
        >
          <svg
            id="themeIcon"
            class="theme-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="5" />
            <path
              d="M12 1v3m0 16v3M5.64 5.64l2.12 2.12m8.48 8.48l2.12 2.12M1 12h3m16 0h3M5.64 18.36l2.12-2.12m8.48-8.48l2.12-2.12"
            />
          </svg>
        </button>
      </div>
    </nav>

    <main>{% block content %}{% endblock %}</main>

    {% if session.user_id and session.role != 'admin' %}
    <a
      href="{{ url_for('customer.cart') }}"
      class="floating-cart"
      title="View Cart"
    >
      ðŸ›’
      <span class="cart-count" id="cartCount">0</span>
    </a>
    {% endif %}

    <footer>
      <div class="footer-logo-section">
        <img
          src="{{ url_for('static', filename='images/eterno-logo.png') }}"
          alt="ETERNO Logo"
          class="footer-logo"
        />
      </div>
      <div class="footer-grid">
        <div class="footer-section">
          <h3>ETERNO</h3>
          <p>
            Timeless fashion that transcends generations. Discover the eternal
            elegance of our collection.
          </p>
        </div>

        <div class="footer-section">
          <h4>QUICK LINKS</h4>
          <ul class="footer-links">
            <li>
              <a href="{{ url_for('customer.shop') }}">Shop</a>
            </li>
            <li>
              <a href="{{ url_for('customer.about') }}">About</a>
            </li>
            {% if session.user_id %}
            <li>
              <a href="{{ url_for('customer.cart') }}">Cart</a>
            </li>
            {% else %}
            <li>
              <a href="{{ url_for('auth.login') }}">Login</a>
            </li>
            <li>
              <a href="{{ url_for('auth.register') }}">Register</a>
            </li>
            {% endif %}
          </ul>
        </div>

        <div class="footer-section">
          <h4>CONTACT</h4>
          <p>
            Email:
            <a href="mailto:etern0.mnl@gmail.com" class="footer-social-link"
              >etern0.mnl@gmail.com</a
            ><br />
            Address: 6C Kingston Street, Greenland Phase 1, Marikina City,
            Philippines
          </p>
        </div>

        <div class="footer-section">
          <h4>FOLLOW US</h4>
          <p>
            <a
              href="https://www.facebook.com/profile.php?id=61568083162096"
              target="_blank"
              class="footer-social-link"
              >Facebook</a
            >
            <a
              href="https://www.instagram.com/eterno.mnl"
              target="_blank"
              class="footer-social-link"
              >Instagram</a
            >
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>Â© 2024 ETERNO - TIMELESS FASHION. All rights reserved.</p>
      </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const logoutLinks = document.querySelectorAll("#logoutUrl");
        logoutLinks.forEach((link) => {
          if (link.dataset.url) {
            window.logoutUrl = link.dataset.url;
          }
        });
      });
    </script>
    {% block extra_js %}{% endblock %}
  </body>
</html>
